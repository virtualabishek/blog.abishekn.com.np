<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Spanner - Google solution for distributed database in easier | Abi&#x27;s Blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://blog.abishekn.com.np/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://blog.abishekn.com.np/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://blog.abishekn.com.np/blog/how-google-use-spanner-for-distributed-database-management"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="blog, programming, technology, databases, software development, distributed systems, Abishek Neupane"><meta data-rh="true" name="author" content="Abishek Neupane"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:creator" content="@virtualabishek"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:title" content="Spanner - Google solution for distributed database in easier | Abi&#x27;s Blog"><meta data-rh="true" name="description" content="I explored the paper - Spanner: Google’s Globally Distributed Database. This blog contains about the spanner in easier way to those who wants to learn about it"><meta data-rh="true" property="og:description" content="I explored the paper - Spanner: Google’s Globally Distributed Database. This blog contains about the spanner in easier way to those who wants to learn about it"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2025-12-29T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/virtualabishek"><meta data-rh="true" property="article:tag" content="Technical,Database,Distributed Database"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://blog.abishekn.com.np/blog/how-google-use-spanner-for-distributed-database-management"><link data-rh="true" rel="alternate" href="https://blog.abishekn.com.np/blog/how-google-use-spanner-for-distributed-database-management" hreflang="en"><link data-rh="true" rel="alternate" href="https://blog.abishekn.com.np/blog/how-google-use-spanner-for-distributed-database-management" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://blog.abishekn.com.np/blog/how-google-use-spanner-for-distributed-database-management","mainEntityOfPage":"https://blog.abishekn.com.np/blog/how-google-use-spanner-for-distributed-database-management","url":"https://blog.abishekn.com.np/blog/how-google-use-spanner-for-distributed-database-management","headline":"Spanner - Google solution for distributed database in easier","name":"Spanner - Google solution for distributed database in easier","description":"I explored the paper - Spanner: Google’s Globally Distributed Database. This blog contains about the spanner in easier way to those who wants to learn about it","datePublished":"2025-12-29T00:00:00.000Z","author":{"@type":"Person","name":"Abishek Neupane","description":"Self Learner","url":"https://github.com/virtualabishek","image":"https://github.com/virtualabishek.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://blog.abishekn.com.np/blog","name":"Abishek's Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Abi&#39;s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Abi&#39;s Blog Atom Feed">




<meta name="google-site-verification" content="YOUR_GOOGLE_VERIFICATION_CODE">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.4373bf43.css">
<script src="/assets/js/runtime~main.adbb6420.js" defer="defer"></script>
<script src="/assets/js/main.ea8820bb.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="https://github.com/virtualabishek.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav class="navbar_MONK"><div class="navbarContent_bMsE"><a class="navbarBrand_hDuH" href="/"><span class="brandIcon_RSAb">A</span><span class="brandText_AbTX">Abi&#x27;s Blog</span></a><div class="navItems_YtXF"><a class="navLink_RnnM" href="/blog">Blog</a><a href="https://abishekn.com.np" target="_blank" rel="noopener noreferrer" class="navLink_RnnM">Portfolio<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="externalIcon_z54T"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a><a href="https://github.com/virtualabishek" target="_blank" rel="noopener noreferrer" class="navLink_RnnM">GitHub<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="externalIcon_z54T"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></a><button class="themeToggle_zD_x" aria-label="Switch to light mode"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div><button class="menuButton_laPa" aria-label="Toggle menu" aria-expanded="false"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/jwt-access-token-refresh-token-in-nestjs-ecommerce">Secure Authentication in NestJS E-Commerce: JWT, Access Tokens, and Refresh Tokens Explained</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/how-google-use-spanner-for-distributed-database-management">Spanner - Google solution for distributed database in easier</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/postgresql-transactions-locking">Understanding Transactions and Locking in PostgreSQL</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/database-comparision">Database Comparision between PostgreSQL, MySQL, Oracle, MS SQL Server</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/village-realities-four-day-revelation">Village Realities: A Four-Day Revelation</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/breaking-down-the-problem">From Chaos to Clarity</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/everyday-reflections">Everyday Reflections: Life&#x27;s Unexpected Moments</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/linux-and-wsl-journeys">My Linux Journey and the Power of WSL</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/too-much-philosophy">Too Much Philosophy, Not Enough Presence</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/first-blog">Hello World</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">Spanner - Google solution for distributed database in easier</h1><div class="container_mt6G margin-vert--md"><time datetime="2025-12-29T00:00:00.000Z">December 29, 2025</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a class="avatar__photo-link" href="/blog/authors/virtualabishek"><img class="avatar__photo authorImage_XqGP" src="https://github.com/virtualabishek.png" alt="Abishek Neupane"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="/blog/authors/virtualabishek"><span class="authorName_yefp">Abishek Neupane</span></a></div><small class="authorTitle_nd0D" title="Self Learner">Self Learner</small><div class="authorSocials_rSDt"><a href="https://github.com/virtualabishek" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 256 250" preserveAspectRatio="xMidYMid" style="--dark:#000;--light:#fff" class="authorSocialLink_owbf githubSvg_Uu4N"><path d="M128.001 0C57.317 0 0 57.307 0 128.001c0 56.554 36.676 104.535 87.535 121.46 6.397 1.185 8.746-2.777 8.746-6.158 0-3.052-.12-13.135-.174-23.83-35.61 7.742-43.124-15.103-43.124-15.103-5.823-14.795-14.213-18.73-14.213-18.73-11.613-7.944.876-7.78.876-7.78 12.853.902 19.621 13.19 19.621 13.19 11.417 19.568 29.945 13.911 37.249 10.64 1.149-8.272 4.466-13.92 8.127-17.116-28.431-3.236-58.318-14.212-58.318-63.258 0-13.975 5-25.394 13.188-34.358-1.329-3.224-5.71-16.242 1.24-33.874 0 0 10.749-3.44 35.21 13.121 10.21-2.836 21.16-4.258 32.038-4.307 10.878.049 21.837 1.47 32.066 4.307 24.431-16.56 35.165-13.12 35.165-13.12 6.967 17.63 2.584 30.65 1.255 33.873 8.207 8.964 13.173 20.383 13.173 34.358 0 49.163-29.944 59.988-58.447 63.157 4.591 3.972 8.682 11.762 8.682 23.704 0 17.126-.148 30.91-.148 35.126 0 3.407 2.304 7.398 8.792 6.14C219.37 232.5 256 184.537 256 128.002 256 57.307 198.691 0 128.001 0Zm-80.06 182.34c-.282.636-1.283.827-2.194.39-.929-.417-1.45-1.284-1.15-1.922.276-.655 1.279-.838 2.205-.399.93.418 1.46 1.293 1.139 1.931Zm6.296 5.618c-.61.566-1.804.303-2.614-.591-.837-.892-.994-2.086-.375-2.66.63-.566 1.787-.301 2.626.591.838.903 1 2.088.363 2.66Zm4.32 7.188c-.785.545-2.067.034-2.86-1.104-.784-1.138-.784-2.503.017-3.05.795-.547 2.058-.055 2.861 1.075.782 1.157.782 2.522-.019 3.08Zm7.304 8.325c-.701.774-2.196.566-3.29-.49-1.119-1.032-1.43-2.496-.726-3.27.71-.776 2.213-.558 3.315.49 1.11 1.03 1.45 2.505.701 3.27Zm9.442 2.81c-.31 1.003-1.75 1.459-3.199 1.033-1.448-.439-2.395-1.613-2.103-2.626.301-1.01 1.747-1.484 3.207-1.028 1.446.436 2.396 1.602 2.095 2.622Zm10.744 1.193c.036 1.055-1.193 1.93-2.715 1.95-1.53.034-2.769-.82-2.786-1.86 0-1.065 1.202-1.932 2.733-1.958 1.522-.03 2.768.818 2.768 1.868Zm10.555-.405c.182 1.03-.875 2.088-2.387 2.37-1.485.271-2.861-.365-3.05-1.386-.184-1.056.893-2.114 2.376-2.387 1.514-.263 2.868.356 3.061 1.403Z"></path></svg></a><a href="https://www.linkedin.com/in/virtualabishek/" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="LinkedIn"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" preserveAspectRatio="xMidYMid" viewBox="0 0 256 256" class="authorSocialLink_owbf"><path d="M218.123 218.127h-37.931v-59.403c0-14.165-.253-32.4-19.728-32.4-19.756 0-22.779 15.434-22.779 31.369v60.43h-37.93V95.967h36.413v16.694h.51a39.907 39.907 0 0 1 35.928-19.733c38.445 0 45.533 25.288 45.533 58.186l-.016 67.013ZM56.955 79.27c-12.157.002-22.014-9.852-22.016-22.009-.002-12.157 9.851-22.014 22.008-22.016 12.157-.003 22.014 9.851 22.016 22.008A22.013 22.013 0 0 1 56.955 79.27m18.966 138.858H37.95V95.967h37.97v122.16ZM237.033.018H18.89C8.58-.098.125 8.161-.001 18.471v219.053c.122 10.315 8.576 18.582 18.89 18.474h218.144c10.336.128 18.823-8.139 18.966-18.474V18.454c-.147-10.33-8.635-18.588-18.966-18.453" fill="#0A66C2"></path></svg></a><a href="https://twitter.com/virtualabishek" target="_blank" rel="noopener noreferrer" class="authorSocialLink_owbf" title="Twitter"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 209" width="1em" height="1em" preserveAspectRatio="xMidYMid" class="authorSocialLink_owbf"><path d="M256 25.45c-9.42 4.177-19.542 7-30.166 8.27 10.845-6.5 19.172-16.793 23.093-29.057a105.183 105.183 0 0 1-33.351 12.745C205.995 7.201 192.346.822 177.239.822c-29.006 0-52.523 23.516-52.523 52.52 0 4.117.465 8.125 1.36 11.97-43.65-2.191-82.35-23.1-108.255-54.876-4.52 7.757-7.11 16.78-7.11 26.404 0 18.222 9.273 34.297 23.365 43.716a52.312 52.312 0 0 1-23.79-6.57c-.003.22-.003.44-.003.661 0 25.447 18.104 46.675 42.13 51.5a52.592 52.592 0 0 1-23.718.9c6.683 20.866 26.08 36.05 49.062 36.475-17.975 14.086-40.622 22.483-65.228 22.483-4.24 0-8.42-.249-12.529-.734 23.243 14.902 50.85 23.597 80.51 23.597 96.607 0 149.434-80.031 149.434-149.435 0-2.278-.05-4.543-.152-6.795A106.748 106.748 0 0 0 256 25.45" fill="#55acee"></path></svg></a></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p><strong>Overview:</strong>
Spanner is Google&#x27;s scalable, globally-distributed database that combines the benefits of traditional relational databases with massive scalability across datacenters worldwide.</p>
<p><strong>Key Features:</strong></p>
<ol>
<li>
<p><strong>Global Distribution &amp; Replication</strong></p>
<ul>
<li>Shards data across multiple datacenters globally using Paxos consensus</li>
<li>Automatic failover and resharding</li>
<li>Configurable replication (typically 3-5 replicas)</li>
</ul>
</li>
<li>
<p><strong>TrueTime API</strong></p>
<ul>
<li>Novel time API that explicitly exposes clock uncertainty</li>
<li>Uses GPS and atomic clocks for synchronization</li>
<li>Typical uncertainty (ε) is 1-7ms</li>
<li>Enables strong consistency guarantees</li>
</ul>
</li>
<li>
<p><strong>Transaction Support</strong></p>
<ul>
<li><strong>External consistency</strong> (linearizability) for distributed transactions</li>
<li>Lock-free snapshot transactions</li>
<li>Non-blocking reads in the past</li>
<li>Two-phase commit across Paxos groups</li>
</ul>
</li>
<li>
<p><strong>Data Model</strong></p>
<ul>
<li>Semi-relational tables with SQL-like query language</li>
<li>Hierarchical schema with directories as units of data placement</li>
<li>Versioned key-value storage with automatic timestamps</li>
</ul>
</li>
</ol>
<p><strong>Performance Highlights:</strong></p>
<ul>
<li>Write latency: ~15ms (including commit wait)</li>
<li>Snapshot read latency: ~1.4ms</li>
<li>Successfully handles datacenter failures with minimal disruption</li>
<li>First major customer (F1 - Google&#x27;s advertising backend) migrated from sharded MySQL</li>
</ul>
<p><strong>Significance:</strong>
First system to provide external consistency and globally-consistent reads at global scale, making it suitable for applications requiring strong consistency across continents.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-the-basic-problem-spanner-solves">1. <strong>The Basic Problem Spanner Solves</strong><a href="#1-the-basic-problem-spanner-solves" class="hash-link" aria-label="Direct link to 1-the-basic-problem-spanner-solves" title="Direct link to 1-the-basic-problem-spanner-solves">​</a></h2>
<p>Imagine you have a banking app used worldwide. You need:</p>
<ul>
<li><strong>Data everywhere</strong>: Users in Japan and USA both need fast access</li>
<li><strong>Consistency</strong>: If someone transfers money, both accounts must update correctly</li>
<li><strong>Availability</strong>: System must work even if a datacenter fails</li>
</ul>
<p>Traditional databases struggle with this. Spanner solves it.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-core-concepts">2. <strong>Core Concepts</strong><a href="#2-core-concepts" class="hash-link" aria-label="Direct link to 2-core-concepts" title="Direct link to 2-core-concepts">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-data-distribution-sharding"><strong>A. Data Distribution (Sharding)</strong><a href="#a-data-distribution-sharding" class="hash-link" aria-label="Direct link to a-data-distribution-sharding" title="Direct link to a-data-distribution-sharding">​</a></h3>
<p>Think of your data like a library:</p>
<ul>
<li>Instead of one giant building (single server), you have multiple branches (servers) worldwide</li>
<li>Each branch holds certain books (data shards)</li>
<li>Users go to their nearest branch for faster service</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">User Data Split Across Servers:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server 1 (USA): Users A-M</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server 2 (Europe): Users N-Z</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server 3 (Asia): Backup copies</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="b-replication-copies"><strong>B. Replication (Copies)</strong><a href="#b-replication-copies" class="hash-link" aria-label="Direct link to b-replication-copies" title="Direct link to b-replication-copies">​</a></h3>
<ul>
<li>Each piece of data exists in <strong>multiple locations</strong> (typically 3-5 copies)</li>
<li>If one datacenter fails, others keep working</li>
<li>Like having backup copies of important documents in different safe deposit boxes</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="c-paxos-consensus"><strong>C. Paxos Consensus</strong><a href="#c-paxos-consensus" class="hash-link" aria-label="Direct link to c-paxos-consensus" title="Direct link to c-paxos-consensus">​</a></h3>
<p>This is how servers <strong>agree</strong> on what data is correct:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Simple Example:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. Server A wants to write &quot;Balance = $100&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. It asks other servers: &quot;Can I write this?&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. Majority (3 out of 5) must agree</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4. Once majority agrees, write is committed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">5. All servers eventually get updated</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-the-truetime-innovation">3. <strong>The TrueTime Innovation</strong><a href="#3-the-truetime-innovation" class="hash-link" aria-label="Direct link to 3-the-truetime-innovation" title="Direct link to 3-the-truetime-innovation">​</a></h2>
<p>This is Spanner&#x27;s &quot;secret sauce&quot; for handling time across the globe.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-time-problem"><strong>The Time Problem:</strong><a href="#the-time-problem" class="hash-link" aria-label="Direct link to the-time-problem" title="Direct link to the-time-problem">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server in USA: &quot;Transaction happened at 10:00:00&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Server in Japan: &quot;Transaction happened at 10:00:01&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">But which really came first? Clocks aren&#x27;t perfectly synchronized!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="truetime-solution"><strong>TrueTime Solution:</strong><a href="#truetime-solution" class="hash-link" aria-label="Direct link to truetime-solution" title="Direct link to truetime-solution">​</a></h3>
<p>Instead of saying &quot;it&#x27;s exactly 10:00:00&quot;, TrueTime says:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;It&#x27;s between 10:00:00.003 and 10:00:00.007&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">(uncertainty range)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>How it works:</strong></p>
<ul>
<li>Uses GPS satellites and atomic clocks</li>
<li>Admits uncertainty explicitly</li>
<li>Waits out uncertainty when needed for correctness</li>
</ul>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Example:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Transaction 1 commits at time [10:00:00.000 - 10:00:00.007]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Spanner waits until 10:00:00.007 passes</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Then Transaction 2 can start at [10:00:00.008 - 10:00:00.015]</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Now we KNOW Transaction 1 finished before Transaction 2 started!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-transaction-types">4. <strong>Transaction Types</strong><a href="#4-transaction-types" class="hash-link" aria-label="Direct link to 4-transaction-types" title="Direct link to 4-transaction-types">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-write-transactions-strong-consistency"><strong>Read-Write Transactions</strong> (Strong Consistency)<a href="#read-write-transactions-strong-consistency" class="hash-link" aria-label="Direct link to read-write-transactions-strong-consistency" title="Direct link to read-write-transactions-strong-consistency">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Example: Transfer $50 from Account A to Account B</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. Lock both accounts</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. Read current balances</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. Calculate new balances</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4. Get timestamp from TrueTime</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">5. Write changes to multiple servers (Paxos)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">6. Wait for commit-wait (ensures ordering)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">7. Release locks</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="snapshot-transactions-read-only-no-locks"><strong>Snapshot Transactions</strong> (Read-Only, No Locks)<a href="#snapshot-transactions-read-only-no-locks" class="hash-link" aria-label="Direct link to snapshot-transactions-read-only-no-locks" title="Direct link to snapshot-transactions-read-only-no-locks">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Example: Generate monthly report</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. Pick a timestamp in the past (e.g., &quot;end of last month&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. Read data as it existed at that exact time</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. No locks needed - just reading history</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4. Can read from any replica that&#x27;s up-to-date</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-data-organization">5. <strong>Data Organization</strong><a href="#5-data-organization" class="hash-link" aria-label="Direct link to 5-data-organization" title="Direct link to 5-data-organization">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="directories"><strong>Directories</strong><a href="#directories" class="hash-link" aria-label="Direct link to directories" title="Direct link to directories">​</a></h3>
<p>Think of directories as folders that keep related data together:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Directory for User &quot;Alice&quot;:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Profile Info</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">├── Purchase History</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">└── Preferences</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">This whole directory:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- Stays together on same servers</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- Moves as a unit if needed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">- Can be replicated to different locations</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="schema-example"><strong>Schema Example</strong><a href="#schema-example" class="hash-link" aria-label="Direct link to schema-example" title="Direct link to schema-example">​</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">-- Users table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> Users {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  user_id INT64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  email STRING</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  name STRING</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">} </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">user_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">-- Orders table (nested under Users)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">TABLE</span><span class="token plain"> Orders {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  user_id INT64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  order_id INT64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  amount </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">FLOAT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">} </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">PRIMARY</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">user_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> order_id</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  INTERLEAVE </span><span class="token operator">IN</span><span class="token plain"> PARENT Users</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The <code>INTERLEAVE</code> means orders are stored physically close to their user - faster queries!</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-how-a-write-works-step-by-step">6. <strong>How a Write Works (Step-by-Step)</strong><a href="#6-how-a-write-works-step-by-step" class="hash-link" aria-label="Direct link to 6-how-a-write-works-step-by-step" title="Direct link to 6-how-a-write-works-step-by-step">​</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">User wants to update their email:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">1. REQUEST arrives at nearest Spanner server</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">2. SERVER identifies which Paxos group owns this data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">3. LEADER of that group receives the request</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4. ACQUIRE LOCKS on the data</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">5. PROPOSE change to other replicas via Paxos</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   &quot;I want to write: user_123.email = &#x27;new@email.com&#x27;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">6. REPLICAS vote (need majority to agree)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">7. TIMESTAMP assigned using TrueTime</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   timestamp = TT.now().latest</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">8. COMMIT WAIT - wait until TT.after(timestamp) is true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   (ensures external consistency)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">9. APPLY the change to all replicas</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">10. RELEASE LOCKS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">11. RETURN success to user</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-key-benefits">7. <strong>Key Benefits</strong><a href="#7-key-benefits" class="hash-link" aria-label="Direct link to 7-key-benefits" title="Direct link to 7-key-benefits">​</a></h2>
<table><thead><tr><th>Feature</th><th>What It Means</th></tr></thead><tbody><tr><td><strong>External Consistency</strong></td><td>Transactions appear in the order they actually happened in real time</td></tr><tr><td><strong>Global Availability</strong></td><td>Works even if entire datacenters fail</td></tr><tr><td><strong>SQL Support</strong></td><td>Use familiar database queries</td></tr><tr><td><strong>Automatic Scaling</strong></td><td>Add servers without downtime</td></tr><tr><td><strong>Strong Consistency</strong></td><td>No &quot;eventual consistency&quot; surprises</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-real-world-example-googles-f1">8. <strong>Real-World Example: Google&#x27;s F1</strong><a href="#8-real-world-example-googles-f1" class="hash-link" aria-label="Direct link to 8-real-world-example-googles-f1" title="Direct link to 8-real-world-example-googles-f1">​</a></h2>
<p>Google&#x27;s advertising system uses Spanner:</p>
<ul>
<li><strong>Before</strong>: Manually sharded MySQL (nightmare to manage)</li>
<li><strong>After</strong>: Spanner handles sharding automatically</li>
<li><strong>Scale</strong>: Tens of terabytes, millions of operations/second</li>
<li><strong>Replication</strong>: 5 replicas across US (2 west coast, 3 east coast)</li>
</ul></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a title="You can find all technical related blogs here." class="tag_zVej tagRegular_sFm0" href="/blog/tags/blog/tags/technical">Technical</a></li><li class="tag_QGVx"><a title="Database concepts, tutorials, and comparisons." class="tag_zVej tagRegular_sFm0" href="/blog/tags/blog/tags/database">Database</a></li><li class="tag_QGVx"><a title="Distributed database systems and concepts." class="tag_zVej tagRegular_sFm0" href="/blog/tags/blog/tags/distributed-database">Distributed Database</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/jwt-access-token-refresh-token-in-nestjs-ecommerce"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Secure Authentication in NestJS E-Commerce: JWT, Access Tokens, and Refresh Tokens Explained</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/postgresql-transactions-locking"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Understanding Transactions and Locking in PostgreSQL</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-the-basic-problem-spanner-solves" class="table-of-contents__link toc-highlight">1. <strong>The Basic Problem Spanner Solves</strong></a></li><li><a href="#2-core-concepts" class="table-of-contents__link toc-highlight">2. <strong>Core Concepts</strong></a><ul><li><a href="#a-data-distribution-sharding" class="table-of-contents__link toc-highlight"><strong>A. Data Distribution (Sharding)</strong></a></li><li><a href="#b-replication-copies" class="table-of-contents__link toc-highlight"><strong>B. Replication (Copies)</strong></a></li><li><a href="#c-paxos-consensus" class="table-of-contents__link toc-highlight"><strong>C. Paxos Consensus</strong></a></li></ul></li><li><a href="#3-the-truetime-innovation" class="table-of-contents__link toc-highlight">3. <strong>The TrueTime Innovation</strong></a><ul><li><a href="#the-time-problem" class="table-of-contents__link toc-highlight"><strong>The Time Problem:</strong></a></li><li><a href="#truetime-solution" class="table-of-contents__link toc-highlight"><strong>TrueTime Solution:</strong></a></li></ul></li><li><a href="#4-transaction-types" class="table-of-contents__link toc-highlight">4. <strong>Transaction Types</strong></a><ul><li><a href="#read-write-transactions-strong-consistency" class="table-of-contents__link toc-highlight"><strong>Read-Write Transactions</strong> (Strong Consistency)</a></li><li><a href="#snapshot-transactions-read-only-no-locks" class="table-of-contents__link toc-highlight"><strong>Snapshot Transactions</strong> (Read-Only, No Locks)</a></li></ul></li><li><a href="#5-data-organization" class="table-of-contents__link toc-highlight">5. <strong>Data Organization</strong></a><ul><li><a href="#directories" class="table-of-contents__link toc-highlight"><strong>Directories</strong></a></li><li><a href="#schema-example" class="table-of-contents__link toc-highlight"><strong>Schema Example</strong></a></li></ul></li><li><a href="#6-how-a-write-works-step-by-step" class="table-of-contents__link toc-highlight">6. <strong>How a Write Works (Step-by-Step)</strong></a></li><li><a href="#7-key-benefits" class="table-of-contents__link toc-highlight">7. <strong>Key Benefits</strong></a></li><li><a href="#8-real-world-example-googles-f1" class="table-of-contents__link toc-highlight">8. <strong>Real-World Example: Google&#39;s F1</strong></a></li></ul></div></div></div></div></div><footer class="footer_xBL4"><div class="container_pcGX"><div class="content_oHCg"><div class="brand_jTdM"><span class="brandIcon_BrvD">A</span><div><h3 class="title_NItk">Abi&#x27;s Blog</h3><p class="tagline_t56d">My Thoughts and Technical Writings</p></div></div><div class="socialLinks_pCXT"><a href="https://github.com/virtualabishek" target="_blank" rel="noopener noreferrer" class="socialLink_S6Im" aria-label="GitHub" title="GitHub"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a><a href="https://twitter.com/virtualabishek" target="_blank" rel="noopener noreferrer" class="socialLink_S6Im" aria-label="Twitter" title="Twitter"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a><a href="https://linkedin.com/in/virtualabishek" target="_blank" rel="noopener noreferrer" class="socialLink_S6Im" aria-label="LinkedIn" title="LinkedIn"><svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://abishekn.com.np" target="_blank" rel="noopener noreferrer" class="socialLink_S6Im" aria-label="Portfolio" title="Portfolio"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg></a></div></div><div class="bottom_T_7l"><p class="copyright_g70o">© <!-- -->2025<!-- --> Abishek Neupane. Built with Docusaurus.</p></div></div></footer></div>
</body>
</html>