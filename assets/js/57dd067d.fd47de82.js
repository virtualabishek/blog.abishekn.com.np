"use strict";(self.webpackChunkblog_site=self.webpackChunkblog_site||[]).push([[7168],{1248:n=>{n.exports=JSON.parse('{"permalink":"/blog/postgresql-transactions-locking","source":"@site/blog/2024-08-14-postgress-day-one.md","title":"Understanding Transactions and Locking in PostgreSQL","description":"A deep dive into PostgreSQL transactions, error handling, savepoints, transactional DDLs, and locking with MVCC.","date":"2025-08-14T00:00:00.000Z","tags":[{"inline":false,"label":"Technical","permalink":"/blog/tags/blog/tags/technical","description":"You can find all technical related blogs here."},{"inline":false,"label":"PostgreSQL","permalink":"/blog/tags/blog/tags/postgresql","description":"PostgreSQL tutorials and tips."},{"inline":false,"label":"Database","permalink":"/blog/tags/blog/tags/database","description":"Database concepts, tutorials, and comparisons."}],"readingTime":6.015,"hasTruncateMarker":false,"authors":[{"name":"Abishek Neupane","title":"Self Learner","url":"https://github.com/virtualabishek","page":{"permalink":"/blog/authors/virtualabishek"},"socials":{"github":"https://github.com/virtualabishek","linkedin":"https://www.linkedin.com/in/virtualabishek/","twitter":"https://twitter.com/virtualabishek"},"imageURL":"https://github.com/virtualabishek.png","key":"virtualabishek"}],"frontMatter":{"slug":"postgresql-transactions-locking","title":"Understanding Transactions and Locking in PostgreSQL","authors":["virtualabishek"],"date":"2025-08-14","description":"A deep dive into PostgreSQL transactions, error handling, savepoints, transactional DDLs, and locking with MVCC.","tags":["technical","postgresql","database"],"hide_table_of_contents":true},"unlisted":false,"prevItem":{"title":"Spanner - Google solution for distributed database in easier","permalink":"/blog/how-google-use-spanner-for-distributed-database-management"},"nextItem":{"title":"Database Comparision between PostgreSQL, MySQL, Oracle, MS SQL Server","permalink":"/blog/database-comparision"}}')},3360:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});var i=s(1248),t=s(4848),r=s(8453);const a={slug:"postgresql-transactions-locking",title:"Understanding Transactions and Locking in PostgreSQL",authors:["virtualabishek"],date:"2025-08-14",description:"A deep dive into PostgreSQL transactions, error handling, savepoints, transactional DDLs, and locking with MVCC.",tags:["technical","postgresql","database"],hide_table_of_contents:!0},l="Understanding Transactions and Locking in PostgreSQL",c={authorsImageUrls:[void 0]},o=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Working with PostgreSQL Transactions",id:"working-with-postgresql-transactions",level:2},{value:"Key Functions for Timestamps",id:"key-functions-for-timestamps",level:3},{value:"Explicit Transactions",id:"explicit-transactions",level:3},{value:"Read-Only Transactions",id:"read-only-transactions",level:3},{value:"Handling Errors Inside a Transaction",id:"handling-errors-inside-a-transaction",level:2},{value:"Using SAVEPOINT",id:"using-savepoint",level:2},{value:"Transactional DDLs",id:"transactional-ddls",level:2},{value:"Understanding Basic Locking and MVCC",id:"understanding-basic-locking-and-mvcc",level:2},{value:"Example: Concurrent Read and Write",id:"example-concurrent-read-and-write",level:3},{value:"Concurrent Updates",id:"concurrent-updates",level:3},{value:"Additional Example",id:"additional-example",level:3},{value:"Additional Notes",id:"additional-notes",level:2}];function d(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:"This guide provides a comprehensive overview of transactions and locking mechanisms in PostgreSQL, based on provided examples and outputs. It covers transaction basics, error handling, savepoints, transactional DDLs, and basic locking with Multi-Version Concurrency Control (MVCC). The outputs from the provided examples are included to illustrate the behavior."}),"\n",(0,t.jsx)(e.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#working-with-postgresql-transactions",children:"Working with PostgreSQL Transactions"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#handling-errors-inside-a-transaction",children:"Handling Errors Inside a Transaction"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#using-savepoint",children:"Using SAVEPOINT"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#transactional-ddls",children:"Transactional DDLs"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.a,{href:"#understanding-basic-locking-and-mvcc",children:"Understanding Basic Locking and MVCC"})}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"working-with-postgresql-transactions",children:"Working with PostgreSQL Transactions"}),"\n",(0,t.jsx)(e.p,{children:"In PostgreSQL, every operation is part of a transaction, even single statements. Transactions ensure data consistency and integrity."}),"\n",(0,t.jsx)(e.h3,{id:"key-functions-for-timestamps",children:"Key Functions for Timestamps"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.code,{children:"now()"})}),": Returns the same timestamp for all statements within a transaction, ensuring consistency."]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Example: Useful for logging actions with a consistent timestamp."}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"SELECT now(), now();\n"})}),"\n","Output:","\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"           now                |               now\n----------------------------------+----------------------------------\n 2025-08-14 13:05:37.943104+05:45 | 2025-08-14 13:05:37.943104+05:45\n(1 row)\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Both calls to ",(0,t.jsx)(e.code,{children:"now()"})," return the same timestamp within a single transaction."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.code,{children:"clock_timestamp()"})}),": Returns the real-time timestamp for each call, even within the same transaction."]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Example: Useful for measuring query execution time."}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"SELECT clock_timestamp();\n"})}),"\n","Output:","\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"         clock_timestamp\n----------------------------------\n 2025-08-14 13:06:42.247353+05:45\n(1 row)\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"explicit-transactions",children:"Explicit Transactions"}),"\n",(0,t.jsxs)(e.p,{children:["To group multiple statements into a single transaction, use the ",(0,t.jsx)(e.code,{children:"BEGIN"}),", ",(0,t.jsx)(e.code,{children:"COMMIT"}),", and ",(0,t.jsx)(e.code,{children:"ROLLBACK"})," commands:"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.code,{children:"BEGIN"})}),": Starts a transaction."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsxs)(e.strong,{children:[(0,t.jsx)(e.code,{children:"COMMIT"})," or ",(0,t.jsx)(e.code,{children:"END"})]}),": Commits the transaction, making changes permanent."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsxs)(e.strong,{children:[(0,t.jsx)(e.code,{children:"ROLLBACK"})," or ",(0,t.jsx)(e.code,{children:"ABORT"})]}),": Discards changes made in the transaction."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Example:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"BEGIN;\nSELECT now();\nSELECT now();\nCOMMIT;\n"})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"BEGIN\n             now\n----------------------------------\n 2025-08-14 13:11:50.579118+05:45\n(1 row)\n\n             now\n----------------------------------\n 2025-08-14 13:11:50.579118+05:45\n(1 row)\n\nCOMMIT\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Both ",(0,t.jsx)(e.code,{children:"now()"})," calls return the same timestamp, as they are part of the same transaction."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"read-only-transactions",children:"Read-Only Transactions"}),"\n",(0,t.jsx)(e.p,{children:"Set a transaction to read-only to prevent modifications:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"SHOW transaction_read_only;\nBEGIN TRANSACTION READ ONLY;\nSELECT 1;\nCOMMIT AND CHAIN;\nSHOW transaction_read_only;\nCOMMIT;\n"})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:" transaction_read_only\n-----------------------\n off\n(1 row)\n\nBEGIN\n ?column?\n----------\n        1\n(1 row)\n\nCOMMIT\n transaction_read_only\n-----------------------\n on\n(1 row)\n\nCOMMIT\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Initially, ",(0,t.jsx)(e.code,{children:"transaction_read_only"})," is ",(0,t.jsx)(e.code,{children:"off"})," (read/write mode)."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"BEGIN TRANSACTION READ ONLY"})," sets it to ",(0,t.jsx)(e.code,{children:"on"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"COMMIT AND CHAIN"})," commits the transaction and starts a new one with the same read-only property."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["To get help for commands in ",(0,t.jsx)(e.code,{children:"psql"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"\\h COMMIT;\n"})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Command:     COMMIT\nDescription: commit the current transaction\nSyntax:\nCOMMIT [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]\nURL: https://www.postgresql.org/docs/16/sql-commit.html\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"\\h ROLLBACK;\n"})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Command:     ROLLBACK\nDescription: abort the current transaction\nSyntax:\nROLLBACK [ WORK | TRANSACTION ] [ AND [ NO ] CHAIN ]\nURL: https://www.postgresql.org/docs/16/sql-rollback.html\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"handling-errors-inside-a-transaction",children:"Handling Errors Inside a Transaction"}),"\n",(0,t.jsx)(e.p,{children:"If an error occurs within a transaction, PostgreSQL aborts the transaction, and subsequent commands are ignored until the transaction is rolled back or committed."}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Example:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"BEGIN;\nSELECT 1;\nSELECT 1/0;\nSELECT 2;\nCOMMIT;\n"})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"BEGIN\n ?column?\n----------\n        1\n(1 row)\n\nERROR:  division by zero\nERROR:  current transaction is aborted, commands ignored until end of transaction block\nROLLBACK\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["The ",(0,t.jsx)(e.code,{children:"division by zero"})," error aborts the transaction."]}),"\n",(0,t.jsxs)(e.li,{children:["The subsequent ",(0,t.jsx)(e.code,{children:"SELECT 2"})," is ignored until ",(0,t.jsx)(e.code,{children:"ROLLBACK"})," resets the transaction state."]}),"\n",(0,t.jsxs)(e.li,{children:["Use ",(0,t.jsx)(e.code,{children:"ROLLBACK"})," to discard changes and recover from the error."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"using-savepoint",children:"Using SAVEPOINT"}),"\n",(0,t.jsx)(e.p,{children:"Savepoints allow partial rollbacks within a transaction, enabling recovery from errors without discarding all changes."}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Example:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"BEGIN;\nSELECT 1;\nSAVEPOINT a;\nSELECT 2/0;\nROLLBACK TO SAVEPOINT a;\nSELECT 2;\nSELECT 3;\nCOMMIT;\n"})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"BEGIN\n ?column?\n----------\n        1\n(1 row)\n\nSAVEPOINT\nERROR:  division by zero\nERROR:  current transaction is aborted, commands ignored until end of transaction block\nROLLBACK\n ?column?\n----------\n        2\n(1 row)\n\n ?column?\n----------\n        3\n(1 row)\n\nCOMMIT\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"SAVEPOINT a"})," marks a point in the transaction."]}),"\n",(0,t.jsxs)(e.li,{children:["After the ",(0,t.jsx)(e.code,{children:"division by zero"})," error, ",(0,t.jsx)(e.code,{children:"ROLLBACK TO SAVEPOINT a"})," reverts to the state at ",(0,t.jsx)(e.code,{children:"a"}),"."]}),"\n",(0,t.jsxs)(e.li,{children:["Subsequent commands (",(0,t.jsx)(e.code,{children:"SELECT 2"}),", ",(0,t.jsx)(e.code,{children:"SELECT 3"}),") execute successfully."]}),"\n",(0,t.jsxs)(e.li,{children:["Use ",(0,t.jsx)(e.code,{children:"RELEASE SAVEPOINT <name>"})," to remove a savepoint if no longer needed."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"transactional-ddls",children:"Transactional DDLs"}),"\n",(0,t.jsxs)(e.p,{children:["PostgreSQL supports transactional Data Definition Language (DDL) operations, meaning DDL commands (e.g., ",(0,t.jsx)(e.code,{children:"CREATE TABLE"}),", ",(0,t.jsx)(e.code,{children:"ALTER TABLE"}),") can be rolled back if the transaction fails."]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsx)(e.p,{children:"Example:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"BEGIN;\nCREATE TABLE testme (id int);\nALTER TABLE testme ALTER COLUMN id TYPE int8;\nCREATE TABLE testme2 (name VARCHAR(20));\nALTER TABLE testme2 ALTER COLUMN name TYPE VARCHAR(50);\n\\d testme;\n\\d testme2;\nROLLBACK;\n\\d testme;\n"})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:'BEGIN\nCREATE TABLE\nALTER TABLE\nCREATE TABLE\nALTER TABLE\n              Table "public.testme"\n Column |  Type  | Collation | Nullable | Default\n--------+--------+-----------+----------+---------\n id     | bigint |           |          |\n\n                   Table "public.testme2"\n Column |         Type          | Collation | Nullable | Default\n--------+-----------------------+-----------+----------+---------\n name   | character varying(50) |           |          |\n\nROLLBACK\nDid not find any relation named "testme".\n'})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["The tables ",(0,t.jsx)(e.code,{children:"testme"})," and ",(0,t.jsx)(e.code,{children:"testme2"})," are created and modified within the transaction."]}),"\n",(0,t.jsxs)(e.li,{children:["After ",(0,t.jsx)(e.code,{children:"ROLLBACK"}),", both tables are removed, as the transaction was not committed."]}),"\n",(0,t.jsxs)(e.li,{children:["The final ",(0,t.jsx)(e.code,{children:"\\d testme;"})," confirms the table no longer exists."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"understanding-basic-locking-and-mvcc",children:"Understanding Basic Locking and MVCC"}),"\n",(0,t.jsxs)(e.p,{children:["PostgreSQL uses ",(0,t.jsx)(e.strong,{children:"Multi-Version Concurrency Control (MVCC)"})," to handle concurrent transactions, ensuring that read operations do not block write operations and vice versa."]}),"\n",(0,t.jsx)(e.h3,{id:"example-concurrent-read-and-write",children:"Example: Concurrent Read and Write"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Transaction 1"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"BEGIN;\nSELECT * FROM testme;\nUPDATE testme SET id = id + 1 RETURNING *;\nCOMMIT;\n"})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"BEGIN\n id\n----\n  0\n(1 row)\n\n id\n----\n  1\n(1 row)\n\nUPDATE 1\nCOMMIT\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Transaction 2"})," (concurrent):"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"BEGIN;\nSELECT * FROM testme;\nCOMMIT;\n"})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"BEGIN\n id\n----\n  0\n(1 row)\n\nCOMMIT\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Transaction 2 sees the data as it was before Transaction 1\u2019s update (",(0,t.jsx)(e.code,{children:"id = 0"}),") due to MVCC."]}),"\n",(0,t.jsxs)(e.li,{children:["Write transactions (e.g., ",(0,t.jsx)(e.code,{children:"UPDATE"}),") do not block read transactions (e.g., ",(0,t.jsx)(e.code,{children:"SELECT"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"concurrent-updates",children:"Concurrent Updates"}),"\n",(0,t.jsx)(e.p,{children:"When multiple transactions update the same table:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Transaction 1"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"BEGIN;\nUPDATE testme SET id = id + 1 RETURNING *;\nUPDATE testme SET id = id + 1 RETURNING *;\nCOMMIT;\n"})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"BEGIN\n id\n----\n  2\n(1 row)\n\nUPDATE 1\n id\n----\n  3\n(1 row)\n\nUPDATE 1\nCOMMIT\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Transaction 2"})," (after Transaction 1 commits):"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"BEGIN;\nUPDATE testme SET id = id + 1 RETURNING *;\nCOMMIT;\n"})}),"\n",(0,t.jsx)(e.p,{children:"Output:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"BEGIN\n id\n----\n  4\n(1 row)\n\nUPDATE 1\nCOMMIT\n"})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Transaction 2 updates the row after Transaction 1 commits, incrementing ",(0,t.jsx)(e.code,{children:"id"})," to 4."]}),"\n",(0,t.jsxs)(e.li,{children:["PostgreSQL locks only the rows affected by an ",(0,t.jsx)(e.code,{children:"UPDATE"}),", allowing concurrent updates on different rows in the same table."]}),"\n",(0,t.jsx)(e.li,{children:"For example, with 1,000 rows, 1,000 concurrent updates can occur on different rows without conflict."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"additional-example",children:"Additional Example"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Transaction"}),":","\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-sql",children:"BEGIN;\nSELECT * FROM testme;\n"})}),"\n","Output:","\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"BEGIN\n id\n----\n  1\n(1 row)\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"additional-notes",children:"Additional Notes"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Use ",(0,t.jsx)(e.code,{children:"\\h <command>"})," in ",(0,t.jsx)(e.code,{children:"psql"})," to get help for commands like ",(0,t.jsx)(e.code,{children:"SELECT"}),", ",(0,t.jsx)(e.code,{children:"COMMIT"}),", or ",(0,t.jsx)(e.code,{children:"ROLLBACK"}),"."]}),"\n",(0,t.jsx)(e.li,{children:"PostgreSQL\u2019s MVCC ensures high concurrency by maintaining multiple versions of data, allowing readers to see a consistent snapshot without waiting for writers."}),"\n",(0,t.jsx)(e.li,{children:"Always commit or roll back transactions explicitly to avoid leaving connections in an aborted state."}),"\n",(0,t.jsx)(e.li,{children:'The note "aba jaba, transaction 1 commit vayo, ani transaction 2 update huncha" translates to "now then, transaction 1 is committed, and transaction 2 updates" in Nepali, indicating the sequence of commits and updates.'}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["For more details, refer to the ",(0,t.jsx)(e.a,{href:"https://www.postgresql.org/docs/16/index.html",children:"PostgreSQL documentation"}),"."]})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>a,x:()=>l});var i=s(6540);const t={},r=i.createContext(t);function a(n){const e=i.useContext(r);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);